{"ast":null,"code":"import _regeneratorRuntime from\"D:/education-website/server/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/education-website/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/education-website/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import YouTube from'react-youtube';import{Link,useLocation,useNavigate}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Play=function Play(){var _Location$state;var Location=useLocation();var data=(_Location$state=Location.state)===null||_Location$state===void 0?void 0:_Location$state.data.id;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),course=_useState2[0],setCourse=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),link=_useState4[0],setLink=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),noteMsg=_useState6[0],setNoteMsg=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),notes=_useState8[0],setNotes=_useState8[1];var opts={height:'100%',width:'100%',playerVars:{// https://developers.google.com/youtube/player_parameters\nautoplay:0}};var fetchCourseData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var res,courseData,_courseData$lessons$,lesson,_link,defaultLink;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/course/'+data);case 3:res=_context.sent;courseData=res.data;_courseData$lessons$=courseData.lessons[0],lesson=_courseData$lessons$.lesson,_link=_courseData$lessons$.link;defaultLink={lesson:lesson,link:_link};setLink(defaultLink);setCourse(courseData);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0.response.data);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchCourseData(_x){return _ref.apply(this,arguments);};}();var saveNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var note,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:note={courseId:course._id,lessonId:link.lesson,title:\"Untitled\",content:noteMsg};_context2.prev=1;_context2.next=4;return axios.post('/new/note',note);case 4:res=_context2.sent;if(res.status===201){setNoteMsg(\"\");fetchNotes();}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);window.alert(\"Failed to save!\");case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function saveNote(){return _ref2.apply(this,arguments);};}();var fetchNotes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _notes;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post('/note',{lessonId:link.lesson,courseId:course._id});case 3:_notes=_context3.sent;if(_notes.status===200){setNotes(_notes.data);}else{setNotes([]);}_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);setNotes([]);case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function fetchNotes(){return _ref3.apply(this,arguments);};}();var handleNote=function handleNote(e){return setNoteMsg(e.target.value);};useEffect(function(){if(!data){return navigate(\"/dashboard\");}fetchCourseData(data);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{className:\"sec-player\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"ratio ratio-21x9\",children:link&&/*#__PURE__*/_jsx(YouTube,{videoId:link.link,opts:opts})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"course-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"nav-link active\",role:\"tab\",\"data-bs-toggle\":\"tab\",href:\"#tab-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-book me-2\"}),\"Chapters\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"nav-link\",role:\"tab\",\"data-bs-toggle\":\"tab\",href:\"#tab-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-code me-2\"}),\"Practice\"]})}),/*#__PURE__*/_jsx(\"li\",{onClick:fetchNotes,className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"nav-link\",role:\"tab\",\"data-bs-toggle\":\"tab\",href:\"#tab-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-note-sticky me-2\"}),\"Notes\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"nav-link\",role:\"tab\",\"data-bs-toggle\":\"tab\",href:\"#tab-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-link me-2\"}),\"Resources\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content py-4\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"tab-1\",className:\"tab-pane active\",role:\"tabpanel\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:course&&/*#__PURE__*/_jsx(_Fragment,{children:course.lessons.map(function(chapter){var lesson=chapter.lesson,link=chapter.link,lessonName=chapter.lessonName;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){return setLink({lesson:lesson,link:link});},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:lessonName}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-2x me-2 fa-caret-right\"})]})})});})})})}),/*#__PURE__*/_jsx(\"div\",{id:\"tab-2\",className:\"tab-pane\",role:\"tabpanel\",children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"It's empty!\",/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-folder-open ms-3\"})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"tab-3\",className:\"tab-pane\",role:\"tabpanel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timestamp\",children:/*#__PURE__*/_jsx(\"h6\",{style:{marginBottom:\"0\"},children:\"01:20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"name-field\",onFocus:function onFocus(event){return event.target.select();},name:\"title\",placeholder:\"Title\",value:\"Untitled\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"timestamp\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-palette\",style:{color:\"#fff\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pallete\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bold ms-2 ps-2 pe-2\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"B\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"italic ps-2 pe-2\",children:/*#__PURE__*/_jsx(\"em\",{children:\"I\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"color ps-2 pe-2\",children:\"A\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"note-box\",children:/*#__PURE__*/_jsx(\"textarea\",{value:noteMsg,onChange:handleNote,className:\"note-content\",placeholder:\"Write note here...\",rows:\"4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"note-bottom\",children:/*#__PURE__*/_jsx(\"button\",{onClick:saveNote,className:\"btn save-btn\",children:\"Save note\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"h5\",{children:notes.length?\"Your Notes\":\"Notes empty\"})}),notes&&notes.map(function(note){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"show-note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timestamp me-3\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:\"ghostwhite\"},className:\"saved-note\",children:\"01:20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"saved-note\",children:/*#__PURE__*/_jsx(\"h6\",{children:note.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"del-edit\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-pencil\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"show-noteText\",children:/*#__PURE__*/_jsx(\"p\",{children:note.content})})]})});})]}),/*#__PURE__*/_jsx(\"div\",{id:\"tab-4\",className:\"tab-pane\",role:\"tabpanel\",children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"No Resources for module.\",/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-link-slash ms-3\"})]})})]})]})})})]});};export default Play;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}